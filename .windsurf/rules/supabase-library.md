---
trigger: model_decision
description: Use this tool when implementing Supabase or updating code relevant to Supabase or authentication
---

The auth-helpers are now deprecated. Use @supabase/ssr to set up Auth for your Next.js app. See the Next.js Server-Side Auth guide to learn how. (https://supabase.com/docs/guides/auth/server-side/nextjs)

@supabase/supabase-js @supabase/ssr

Use @resources:supabase-mcp-server: or @resources:postgresql: to check database and schemas, functions, tables, and all you need.

Please review
C:\Users\conta\cursor\studio-1\src\lib\supabase
C:\Users\conta\cursor\studio-1\docs\important_rules_guidelines_docs\supabase_auth_integration.md

---
description: Database best practices focusing on Prisma and Supabase integration
globs: src/lib/supabase/*, supabase/**/*
---

# Database Best Practices

## Supabase Setup
- Configure proper project setup
- Implement proper authentication
- Use proper database setup
- Configure proper storage
- Implement proper policies
- Use proper client setup

## Supabase Security
- Implement proper RLS policies
- Use proper authentication
- Configure proper permissions
- Handle sensitive data properly
- Implement proper backups
- Use proper encryption

## Supabase Queries
- Use proper query optimization
- Implement proper filtering
- Use proper joins
- Handle real-time properly
- Implement proper pagination
- Use proper functions

## Database Design
- Use proper normalization
- Implement proper indexing
- Use proper constraints
- Define proper relations
- Implement proper cascades
- Use proper data types

## Performance
- Use proper connection pooling
- Implement proper caching
- Use proper query optimization
- Handle N+1 queries properly
- Implement proper batching
- Monitor performance metrics

## Security
- Use proper authentication
- Implement proper authorization
- Handle sensitive data properly
- Use proper encryption
- Implement proper backups
- Monitor security issues

## Best Practices
- Follow database conventions
- Use proper migrations
- Implement proper versioning
- Handle errors properly
- Document schema properly
- Monitor database health
